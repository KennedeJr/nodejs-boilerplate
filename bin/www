#!/usr/bin/env node

const app = require('../app')
const dnscache = require('dnscache')

const PORT = process.env.NODE_PORT || 3000

const dnsCacheEnabled = process.env.DNS_CACHE_ENABLED !== 'false'
const dnsCacheTTL = parseInt(process.env.DNS_CACHE_TTL || 300)
const dnsCacheCacheSize = parseInt(process.env.DNS_CACHE_ENABLED || 1000)

dnscache({
  enable: dnsCacheEnabled,
  ttl: dnsCacheTTL,
  cachesize: dnsCacheCacheSize
})

app.listen(PORT, () => {
  console.log(`Listen on port ${PORT}`)
})
